total 124
drwxr-xr-x 4 jmarinho 2023_porto  4096 Oct 18 16:17 libft
-rw-r--r-- 1 jmarinho 2023_porto  2845 Oct 18 13:17 Makefile
-rwxr-xr-x 1 jmarinho 2023_porto 94272 Oct 18 16:17 minishell
-rw-r--r-- 1 jmarinho 2023_porto  8128 Oct 18 12:09 minishell.h
-rw-r--r-- 1 jmarinho 2023_porto   136 Oct  2 13:13 readline.supp
-rw-r--r-- 1 jmarinho 2023_porto   677 Oct  2 13:13 README.txt
drwxr-xr-x 8 jmarinho 2023_porto  4096 Oct 18 16:17 srcs
-rw-r--r-- 1 jmarinho 2023_porto     0 Oct 18 16:25 test
# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: jmarinho <jmarinho@student.42.fr>          +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2023/10/18 13:04:50 by jmarinho          #+#    #+#              #
#    Updated: 2023/10/18 13:17:07 by jmarinho         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

# ----------------------------------- COLORS -----------------------------------

RED = \033[0;31m
GREEN = \033[0;32m
PURPLE = \033[1;35m
RESET = \033[0m

# ---------------------------------- VARIABLES ---------------------------------

NAME = minishell

CC = cc

CFLAGS = -Wall -Wextra -Werror -g
LFLAGS = -lreadline

RM = rm -f
MAKE = make --no-print-directory -C

LIBFT_DIR = libft
LIBFT = $(LIBFT_DIR)/libft.a

SRCS = srcs/main.c \
		srcs/parsing/parser.c \
		srcs/parsing/tokenizer.c \
		srcs/parsing/tokenizer_utils.c \
		srcs/parsing/syntax_checker.c \
		srcs/parsing/expander.c \
		srcs/parsing/command_table.c \
		srcs/parsing/command_table_utils.c \
		srcs/environment/environment_lst.c \
		srcs/execution/executer.c \
		srcs/execution/redir_handler.c \
		srcs/execution/pipes_handler.c \
		srcs/builtins/cd.c \
		srcs/builtins/echo.c \
		srcs/builtins/env.c \
		srcs/builtins/exit.c \
		srcs/builtins/export.c \
		srcs/builtins/pwd.c \
		srcs/builtins/unset.c \
		srcs/utils/main_utils.c \
		srcs/utils/parsing_utils.c \
		srcs/utils/execution_utils.c \
		srcs/utils/free_utils.c \
		srcs/utils/builtins_utils.c \
		srcs/signals/signal.c \
		srcs/signals/handlers.c \

S_OBJS = $(SRCS:.c=.o)

# ------------------------------------ RULES -----------------------------------

all: $(NAME)

%.o : %.c
	@$(CC) $(CFLAGS) -c $< -o $@ -I.
	@printf "$(PURPLE)	Compiled$(RESET) $<\n"

$(NAME): $(S_OBJS)
	@$(MAKE) $(LIBFT_DIR)
	@$(CC) $(CFLAGS) $(SRCS) $(LIBFT) $(LFLAGS) -o $(NAME)
	@printf "$(GREEN)	Executable ./$(NAME) was created.\n$(RESET)"

clean:
	@$(MAKE) $(LIBFT_DIR) clean
	@$(RM) $(S_OBJS)
	@printf "$(RED)	Object files were removed.\n$(RESET)"

fclean: clean
	@$(MAKE) $(LIBFT_DIR) fclean
	@$(RM) $(NAME)
	@printf "$(RED)	Executable ./$(NAME) was removed.\n$(RESET)"

re: fclean all

valgrind: all
	@valgrind --suppressions=readline.supp --leak-check=full --show-leak-kinds=all --track-origins=yes ./$(NAME)

.PHONY: all clean fclean re
